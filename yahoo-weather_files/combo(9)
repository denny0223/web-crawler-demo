var YUI;YUI.add("lw-base64",function(a){"use strict";var b={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var c,d,e,f,g,h,i,j="",k=0;for(a=b.utf8_encode(a);k<a.length;)c=a.charCodeAt(k),k+=1,d=a.charCodeAt(k),k+=1,e=a.charCodeAt(k),k+=1,f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?(h=64,i=64):isNaN(e)&&(i=64),j=j+this.keyStr.charAt(f)+this.keyStr.charAt(g)+this.keyStr.charAt(h)+this.keyStr.charAt(i);return j},decode:function(a){var c,d,e,f,g,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)f=this.keyStr.indexOf(a.charAt(k)),k+=1,g=this.keyStr.indexOf(a.charAt(k)),k+=1,h=this.keyStr.indexOf(a.charAt(k)),k+=1,i=this.keyStr.indexOf(a.charAt(k)),k+=1,c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!==h&&(j+=String.fromCharCode(d)),64!==i&&(j+=String.fromCharCode(e));return j=b.utf8_decode(j)},utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");var b,c="",d=0;for(d;d<a.length;d+=1)b=a.charCodeAt(d),128>b?c+=String.fromCharCode(b):b>127&&2048>b?(c+=String.fromCharCode(b>>6|192),c+=String.fromCharCode(63&b|128)):(c+=String.fromCharCode(b>>12|224),c+=String.fromCharCode(b>>6&63|128),c+=String.fromCharCode(63&b|128));return c},utf8_decode:function(a){for(var b="",c=0,d=0,e=0,f=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c+=1):d>191&&224>d?(e=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&e),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&f),c+=3);return b}};a.namespace("LW"),a.LW.Base64=b},"@VERSION@",{});var YUI;YUI.add("lw-overlay",function(a){"use strict";var b=function(a){this.parentNode=a.parentNode,this.bodyContent=a.bodyContent,this.headContent=a.headerContent||null,this.footerContent=a.footerContent||null,this.width=a.width||null,this.zIndex=a.zIndex||null,this.xy=a.xy||null,this.cssStyle=a.cssStyle||null,this.cssClass=a.cssClass||null,this.prefix=a.prefix||"append",this.render=a.render===!1?!1:!0,this.visible=a.visible===!1?!1:!0,this.mainNode=null,this.renderMarkup()};a.mix(b.prototype,{set:function(a,b){switch(this[a]=b,a){case"headerContent":this.setHeader(b);break;case"bodyContent":this.setBody(b);break;case"footerContent":this.setFooter(b);break;case"xy":this.setXY(b);break;case"zIndex":this.setZindex(b)}},get:function(a){var b=null;switch(a){case"contentBox":b=this.mainNode}return b},show:function(){this.mainNode.removeClass("lw-overlay-hidden")},hide:function(){this.mainNode.addClass("lw-overlay-hidden")},setBody:function(a){this.mainNode.one(".lw-widget-bd").set("innerHTML",a)},setHeader:function(a){var b=this.mainNode;a?b.one(".lw-widget-hd")?b.one(".lw-widget-hd").set("innerHTML",a):(a='<div class="lw-widget-hd">'+a+"</div>",b.insert(a,0)):b.one(".lw-widget-hd")&&b.one(".lw-widget-hd").remove()},setFooter:function(a){var b=this.mainNode;a?b.one(".lw-widget-ft")?b.one(".lw-widget-ft").set("innerHTML",a):(a='<div class="lw-widget-ft">'+a+"</div>",b.one(".lw-widget-bd").insert(a,"after")):b.one(".lw-widget-ft")&&b.one(".lw-widget-ft").remove()},setXY:function(a){var b=this.mainNode;b.setStyle("left",a[0]+"px"),b.setStyle("top",a[1]+"px")},setZindex:function(a){var b=this.mainNode;b.setStyle("zIndex",a)},renderMarkup:function(){var b,c,d,e,f,g,h,i;if(this.mainNode?b=this.mainNode:(e='<div class="lw-widget lw-overlay">'+(a.UA.ie&&a.UA.ie<=7?'<div class="lw-arrowimg">&nbsp;</div>':"")+'<div class="lw-overlay-content"><div class="lw-widget-bd"></div></div></div>',this.mainNode=b=a.Node.create(e),"prepend"===this.prefix?this.parentNode.prepend(b):this.parentNode.append(b)),c=this.headContent||"",c?b.one(".lw-widget-hd")?b.one(".lw-widget-hd").set("innerHTML",c):(c='<div class="lw-widget-hd">'+c+"</div>",b.one(".lw-widget-bd").insert(c,"before")):b.one(".lw-widget-hd")&&b.one(".lw-widget-hd").remove(),b.one(".lw-widget-bd").set("innerHTML",this.bodyContent),d=this.footerContent||"",d?b.one(".lw-widget-ft")?b.one(".lw-widget-ft").set("innerHTML",d):(d='<div class="lw-widget-ft">'+d+"</div>",b.one(".lw-widget-bd").insert(d,"after")):b.one(".lw-widget-ft")&&b.one(".lw-widget-ft").remove(),!1===this.visible&&b.addClass("lw-overlay-hidden"),this.width&&b.setStyle("width",this.width+"px"),this.xy&&(b.setStyle("left",this.xy[0]+"px"),b.setStyle("top",this.xy[1]+"px")),this.zIndex&&b.setStyle("zIndex",this.zIndex),this.cssClass)if(g=0,i=this.cssClass.length,a.UA.ie&&a.UA.ie<=7){for(g;i>=g;g+=1){if(-1!==this.cssClass[g].indexOf("NorthWest")){h=.04*this.width;break}if(-1!==this.cssClass[g].indexOf("NorthEast")){h=.855*this.width;break}if(-1!==this.cssClass[g].indexOf("NorthFarEast")){h=this.width-27;break}if(-1!==this.cssClass[g].indexOf("NorthFarWest")){h=1;break}b.addClass(this.cssClass[g])}h||(h=this.width/2-13),a.one(".lw-arrowimg").setStyle("marginLeft",h+"px"),a.one(".lw-arrowimg").setStyle("zIndex",this.zIndex+1)}else for(g;i>=g;g+=1)b.addClass(this.cssClass[g]);if(this.cssStyle)for(f in this.cssStyle)this.cssStyle.hasOwnProperty(f)&&b.setStyle(f,this.cssStyle[f])}}),a.namespace("LW"),a.LW.Overlay=b},"@VERSION@",{requires:["node","event"]});var YUI;YUI.add("lw-placefinder-YQL",function(a){"use strict";var b={proto:null,host:"locdrop.query.yahoo.com",table:"locdrop.placefinder",urlPath:"/v1/public/yql?",gflags:"f",flags:"T",locale:"en-US",timeout:5e3,geocodeAddress:function(a,b,c,d,e){if(null!==a){this.proto||(this.proto=e.instance.proto,this.locale=e.instance.locale);var f,g="",h=a+g;h=h.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),f="select * from "+this.table+' where text="'+encodeURIComponent(h)+'" and locale="'+this.locale+'" and gflags="'+this.gflags+'" and flags="'+this.flags+'"',this.geocode(f,b,c,d,e)}},geocode:function(b,c,d,e,f){var g,h,i;i=this.proto+this.host+this.urlPath+"q="+b+"&format=json&callback={callback}",g={instance:this,tcb:e,fcb:d,scb:c,cb:f,requestURL:i},h=new a.JSONPRequest(i,{on:{success:this.geocodeDone,timeout:this.geocodeTimedout,failure:this.geocodeFailure},timeout:this.timeout,args:[g]}),h.send()},geocodeDone:function(a,b){"undefined"==typeof a||"undefined"!=typeof a.error||"undefined"==typeof a.query.results?b.instance.geocodeFailure(a,b):b.scb(a,b.cb)},geocodeTimedout:function(a,b){var c={errCode:"LW_GEOCODER_TIMEOUT",requestURL:b.requestURL,yqlResponse:a};b.tcb(c,b.cb)},geocodeFailure:function(a,b){var c={errCode:"LW_GEOCODER_FAILURE",requestURL:b.requestURL,yqlResponse:a};b.fcb(c,b.cb)},geocodeMakeLocArray:function(b,c,d){var e,f,g,h,i,j=0,k=[],l=[];for(1===b?k.push(c.query.results.Result):k=c.query.results.Result,f=k.length,e=0;f>e;e+=1)g="",null!==k[e].line1&&(g=k[e].line1),null!==k[e].line2&&(g.length>0&&(g+=", "),g+=k[e].line2),null!==k[e].line3&&(g.length>0&&(g+=", "),g+=k[e].line3),null!==k[e].line4&&(g.length>0&&(g+=", "),g+=k[e].line4),k[e].id="new-fl-"+a.LW.Base64.encode(g),k[e].addr=g,k[e].city=k[e].city||null,null!==k[e].uzip&&""!==k[e].uzip&&"0"!==k[e].uzip&&(k[e].zip=k[e].uzip),null!==k[e].statecode&&(k[e].sc=k[e].statecode),null!==k[e].countrycode&&(k[e].cc=k[e].countrycode),null!==k[e].country&&(k[e].ctry=k[e].country),null!==k[e].latitude&&(k[e].lat=k[e].latitude),null!==k[e].longitude&&(k[e].lon=k[e].longitude),null!==k[e].woeid&&(k[e].woe=k[e].woeid),h=!0,d&&(i=d(k[e]),i.hidden&&(h=!1),i.disabled&&(k[e].disabled=!0)),h&&(l[j]=k[e],j+=1);return l}};a.namespace("LW"),a.LW.PlaceFinder=b},"@VERSION@",{requires:["jsonp","jsonp-url","lw-base64"]});var YUI;YUI.add("lw-autosuggest",function(a){"use strict";var b={proto:null,host:null,urlPath:null,locale:"en-US",timeout:5e3,pending:!1,suggestLocation:function(b,c,d,e,f,g,h){if(null!==b&&!this.pending){this.proto||(this.proto=h.instance.proto,this.locale=h.instance.locale,"https://"===this.proto?(this.host="search.yahoo.com",this.urlPath="/sugg/gossip/gossip-gl-location?output=sd1&p2=t,pt"):(this.host="sugg.us.search.yahoo.net",this.urlPath="/gossip-gl-location?output=sd1&p2=t,pt")),this.pending=!0;var i,j,k="",l=b+k,m=this.proto+this.host+this.urlPath;l=l.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0"),null!==c&&null!==d&&(m+="&p1="+d+","+c),m+="&command="+l+"&lc="+this.locale+"&callback={callback}",i={instance:this,tcb:g,fcb:f,scb:e,cb:h,requestURL:m,inputVal:b},j=new a.JSONPRequest(m,{on:{success:this.suggestDone,timeout:this.suggestTimedout,failure:this.suggestFailure},timeout:this.timeout,args:[i]}),j.send()}},suggestDone:function(a,b){"undefined"==typeof a||"undefined"==typeof a.r?b.instance.suggestFailure(a,b):(b.instance.pending=!1,b.scb(a,b.inputVal,b.cb))},suggestTimedout:function(a,b){b.instance.pending=!1;var c={errCode:"LW_AUTOSUGGEST_TIMEOUT",requestURL:b.requestURL,yqlResponse:a};b.tcb(c,b.cb)},suggestFailure:function(a,b){b.instance.pending=!1;var c={errCode:"LW_AUTOSUGGEST_FAILURE",requestURL:b.requestURL,yqlResponse:a};b.fcb(c,b.cb)},suggestMakeLocArray:function(b,c){var d,e,f,g,h,i=0,j=0,k=0,l=b?b.length:0,m=[],n=this.locale.toLowerCase(),o="",p="",q="",r=c.toUpperCase();for(i;l>i;i+=1){if(h=!1,g=[],o="",null!==b[i].d&&(d=b[i].d,-1!==d.indexOf(":")&&(d=d.split(":")[1]),-1!==d.indexOf("&")))for(e=d.split("&"),k=0,f=e.length,k;f>k;k+=1)0===e[k].indexOf("woeid")?b[i].woe=e[k].split("=")[1]:0===e[k].indexOf("lat")?b[i].lat=e[k].split("=")[1]:0===e[k].indexOf("lon")?b[i].lon=e[k].split("=")[1]:0===e[k].indexOf("sc")?b[i].sc=e[k].split("=")[1]:0===e[k].indexOf("s")?b[i].state=e[k].split("=")[1]:0===e[k].indexOf("c")?b[i].ctry=e[k].split("=")[1]:0===e[k].indexOf("iso")?b[i].cc=e[k].split("=")[1]:0===e[k].indexOf("pn")&&(b[i].pn_city=e[k].split("=")[1]);p=b[i].k,q=b[i].pn_city,p&&0===p.toUpperCase().indexOf(r)?h=!0:q&&0===q.toUpperCase().indexOf(r)&&(h=!0,p=q),h&&(b[i].city=p,-1!==n.indexOf("hk")||-1!==n.indexOf("tw")?("undefined"!=typeof b[i].ctry&&b[i].ctry&&g.push(b[i].ctry),"undefined"!=typeof b[i].state&&b[i].state&&p!==b[i].state&&g.push(b[i].state),g.push(p)):(g.push(p),-1!==n.indexOf("it")||-1!==n.indexOf("au")||-1!==n.indexOf("br")||-1!==n.indexOf("mx")||-1!==n.indexOf("ca")||-1!==n.indexOf("us")?"undefined"!=typeof b[i].sc&&b[i].sc?g.push(b[i].sc):"undefined"!=typeof b[i].state&&b[i].state&&p!==b[i].state&&g.push(b[i].state):"undefined"!=typeof b[i].state&&b[i].state&&p!==b[i].state?g.push(b[i].state):"undefined"!=typeof b[i].sc&&b[i].sc&&g.push(b[i].sc),-1!==n.indexOf("us")&&"undefined"!=typeof b[i].cc&&b[i].cc?g.push(b[i].cc):"undefined"!=typeof b[i].ctry&&b[i].ctry&&g.push(b[i].ctry)),o=g.join(", "),b[i].addr=o,b[i].id="new-gsp-"+a.LW.Base64.encode(o),o&&(m[j]={},m[j].id=b[i].id,m[j].woe=b[i].woe,m[j].addr=b[i].addr,"undefined"!=typeof b[i].lat&&b[i].lat&&(m[j].lat=b[i].lat),"undefined"!=typeof b[i].lon&&b[i].lon&&(m[j].lon=b[i].lon),"undefined"!=typeof b[i].city&&b[i].city&&(m[j].city=b[i].city),"undefined"!=typeof b[i].state&&b[i].state&&(m[j].state=b[i].state),"undefined"!=typeof b[i].sc&&b[i].sc&&(m[j].sc=b[i].sc),"undefined"!=typeof b[i].ctry&&b[i].ctry&&(m[j].ctry=b[i].ctry),"undefined"!=typeof b[i].cc&&b[i].cc&&(m[j].cc=b[i].cc),j+=1))}return m}};a.namespace("LW"),a.LW.PlaceSuggest=b},"@VERSION@",{requires:["jsonp","jsonp-url","lw-base64"]});var YUI;YUI.add("lw-geo",function(a){"use strict";var b={running:!1,timeout:15e3,geoDetectSupport:function(){return navigator.geolocation?!0:!1},getCurrentLocation:function(a,b,c){this.running?b(null):(c=c||this.timeout,navigator.geolocation.getCurrentPosition(a,b,{timeout:c}),this.running=!0)}};a.namespace("LW"),a.LW.GeoLocation=b},"@VERSION@",{});var YUI;YUI.add("lw-yql",function(a){"use strict";var b={crumb:null,app:"yahoo.locdrop.lw.desktop",locale:"en-US",version:"v4",proto:"http://",yqlHost:"us-locdrop.query.yahoo.com",yqlTable:"user.location.public",urlPath:"/v1/public/yql?",yqlTimeout:5e3,pendingCallback:!1,initConfig:function(a){a.crumb&&(this.crumb=a.crumb),a.locale&&(this.locale=a.locale),a.app&&(this.app=a.app),a.version&&(this.version=a.version),a.yqlHost&&(this.yqlHost=a.yqlHost),("https:"===window.location.protocol||a.forceSSL)&&(this.proto="https://")},getHostUrl:function(){return this.proto+this.yqlHost+this.urlPath},makeRequest:function(b,c,d){if(this.pendingCallback)return!1;this.pendingCallback=!0;var e,f,g=this.getHostUrl()+"q="+b+"&format=json&callback={callback}";return f={callbackStr:c,env:d,instance:this,requestURL:g},e=new a.JSONPRequest(g,{on:{success:this.requestDone,timeout:this.requestTimeout,failure:this.requestFailure},timeout:this.yqlTimeout,args:[f]}),e.send(),!0},getCurrentLocation:function(a,b,c){var d,e,f,g,h,i;return f=this.crumb,e=this.locale,g=this.version,h=this.app,i={success:a,error:b,timeout:c},d="SELECT * FROM "+this.yqlTable+' WHERE crumb="'+f+'" AND version="'+g+'" AND locale="'+e+'" AND app="'+h+'"',this.makeRequest(encodeURIComponent(d),"getCurrentLocationCallback",i)},getAllLocations:function(a,b,c,d){var e,f,g,h,i,j;return g=this.crumb,f=this.locale,h=this.version,i=this.app,j={success:a,error:b,timeout:c,callback:d},e="SELECT * FROM "+this.yqlTable+' WHERE crumb="'+g+'" AND version="'+h+'" AND locale="'+f+'" AND app="'+i+'"',this.makeRequest(encodeURIComponent(e),"getAllLocationsCallback",j)},getCurrentLocationCallback:function(a,b){var c="current",d=[];a.query.results.locdrop[c]&&(d=a.query.results.locdrop[c].length?a.query.results.locdrop[c]:[a.query.results.locdrop[c]]),b.env.success&&b.env.success(d)},getAllLocationsCallback:function(a,b){var c="favorite",d=[];a.query.results.locdrop[c]&&(d=a.query.results.locdrop[c].length?a.query.results.locdrop[c]:[a.query.results.locdrop[c]]),b.env.success&&b.env.success(d,b.env.callback)},deleteLocation:function(a,b,c,d,e){var f,g,h,i,j={id:a,success:b,error:c,timeout:d,callback:e};return h=this.crumb,i=this.version,g=this.app,f="DELETE FROM "+this.yqlTable+' WHERE id="'+a+'" AND app="'+g+'" AND crumb="'+h+'" AND version="'+i+'"',this.makeRequest(encodeURIComponent(f),"deleteLocationCallback",j)},deleteLocationCallback:function(a,b){b.env.success&&b.env.success(a,b.env.callback)},setLocation:function(a,b,c,d,e){var f,g,h,i,j,k,l,m=[],n=[],o={success:b,error:c,timeout:d,callback:e};return k=this.crumb,i=this.app,j=this.version,l=this.locale,k&&(m.push("crumb"),n.push('"'+k+'"')),i&&(m.push("app"),n.push('"'+i+'"')),j&&(m.push("version"),n.push('"'+j+'"')),l&&(m.push("locale"),n.push('"'+l+'"')),a.type&&(m.push("type"),n.push('"'+a.type+'"')),a.lat&&(m.push("lat"),n.push('"'+a.lat+'"')),a.lon&&(m.push("lon"),n.push('"'+a.lon+'"')),a.radius&&(m.push("radius"),n.push('"'+a.radius+'"')),a.woe&&(m.push("woe"),n.push('"'+a.woe+'"')),a.addrstring&&(m.push("addrstring"),n.push('"'+a.addrstring+'"')),a.ip&&(m.push("ip"),n.push('"'+a.ip+'"')),a.wifi_id&&(m.push("wifi_id"),n.push('"'+a.wifi_id+'"')),a.wifi_ssid&&(m.push("wifi_ssid"),n.push('"'+a.wifi_ssid+'"')),a.cell_id&&(m.push("cell_id"),n.push('"'+a.cell_id+'"')),a.src&&"declared"===a.src&&(m.push("src"),n.push('"'+a.src+'"')),g=m.join(", "),h=n.join(", "),f="INSERT INTO "+this.yqlTable+"("+g+") VALUES ("+h+")",this.makeRequest(encodeURIComponent(f),"setLocationCallback",o)},setLocationCallback:function(a,b){b.env.success&&b.env.success(a,b.env.callback)},queryTypeErroCode:function(a){var b,c="LYD_GET_API_ERR";return b=new RegExp(a,"i"),b.test("select")||b.test("update")?c="LYD_SET_API_ERR":b.test("delete")&&(c="LYD_CLEAR_API_ERR"),c},responseErrorCheck:function(a,b){var c={errCode:0,requestURL:b||"",yqlResponse:a||""};if("undefined"==typeof a||"undefined"!=typeof a.error||"undefined"==typeof a.query||"undefined"==typeof a.query.results||null===a.query.results||"undefined"!=typeof a.query.results.Error||"undefined"!=typeof a.query.results.result)return c.errCode=this.queryTypeErroCode(b),c;if("undefined"!=typeof a.query.results.locdrop&&"undefined"!=typeof a.query.results.locdrop.status&&"ERROR"===a.query.results.locdrop.status.code){switch(a.query.results.locdrop.actionTaken){case"get":c.errCode="LYD_GET_API_ERR";break;case"set":c.errCode="LYD_SET_API_ERR";break;case"clear":c.errCode="LYD_CLEAR_API_ERR";break;default:return}return c}return c},requestDone:function(a,b){b.instance.pendingCallback=!1;var c=b.instance.responseErrorCheck(a,b.requestURL);return c.errCode?void b.env.error(c,b.env.callback):void b.instance[b.callbackStr](a,b)},requestTimeout:function(a,b){b.instance.pendingCallback=!1;var c={errCode:"LYD_SAVED_LOC_FETCH_TIMEOUT",requestURL:b.requestURL,yqlResponse:a};b.env.timeout&&b.env.timeout(c,b.env.callback)},requestFailure:function(a,b){b.instance.pendingCallback=!1;var c=b.instance.responseErrorCheck(a);b.env.error&&b.env.error(c,b.env.callback)}};a.namespace("LW"),a.LW.YQL=b},"@VERSION@",{requires:["jsonp","jsonp-url"]});
var YUI;YUI.add("lw-core",function(a){"use strict";function b(b){var c=this,d={status:"OK"},e={status:"ERROR"},f={status:"TIMEOUT"};this.filterCallback=b.filterCallback,this.geoTimeout=15e3,this.app=b.app||"yahoo.locdrop.lmp.desktop",this.holderSetTimeout=null,this.autoCompleteCount=2,this.addrStr=b.pageLoadLoc||null,this.lat=b.lat||null,this.lon=b.lon||null,this.gossipResults=[],this.cacheFavLoc=[],this.favSuggLoc=[],this.flLoc=[],this.detectCtx=null,this.yqladdFavLocCB=null,this.holderSetTimeout=null,this.locale=b.locale||"en-US",this.init=function(){a.LW.YQL.initConfig(b)},this.getFavoriteCache=function(){return c.cacheFavLoc},this.invalidateCache=function(){c.cacheFavLoc=[]},this.selectedLoc=function(a){var b,c=0,d=[];for(-1!==a.indexOf("new-gsp")?(d=this.favSuggLoc,b="gossip"):-1!==a.indexOf("new-fl")?(d=this.flLoc,b="findlocation"):(d=this.cacheFavLoc,b="locdrop"),c;c<d.length;c+=1)if(d[c].id===a)return d[c].origin=b,d[c];return null},this.detect=function(b){return this.detectCtx=b,a.LW.GeoLocation.geoDetectSupport()?void(a.LW.GeoLocation.running||(a.LW.GeoLocation.getCurrentLocation(c.detectLocationInsert,c.detectFailed,c.geoTimeout),this.holderSetTimeout=setTimeout(a.bind(function(){this.detectTimeout()},this),this.geoTimeout))):(e.code="LW_DETECT_BROWSER_SUPPORT",b.callback.call(b.instance,{},e))},this.detectLocationInsert=function(b){a.LW.GeoLocation.running=!1;var d={};d.lat=b.coords.latitude,d.lon=b.coords.longitude,d.radius=b.coords.accuracy,d.type="current",a.LW.YQL.setLocation(d,c.yqldetectSuccess,c.detectFailed,c.detectTimeout)},this.yqldetectSuccess=function(){c.invalidateCache(),a.LW.YQL.getCurrentLocation(c.detectSuccess,c.detectFailed,c.detectTimeout)},this.detectSuccess=function(a){return c.holderSetTimeout&&clearTimeout(c.holderSetTimeout),a.length&&(a[0].orgin="locdrop"),c.detectCtx.callback.call(c.detectCtx.instance,a,d)},this.detectFailed=function(b){return c.holderSetTimeout&&clearTimeout(c.holderSetTimeout),a.LW.GeoLocation.running=!1,e.code="LW_DETECT_FAILURE",c.detectCtx.callback.call(c.detectCtx.instance,b,e)},this.detectTimeout=function(b){return c.holderSetTimeout&&clearTimeout(c.holderSetTimeout),a.LW.GeoLocation.running=!1,f.code="LW_DETECT_TIMEOUT",c.detectCtx.callback.call(c.detectCtx.instance,b,f)},this.suggest=function(b,e){var f,g,h;if("undefined"!=typeof b&&b.length>=this.autoCompleteCount){if("undefined"!=typeof c.gossipResults[b])return g=c.gossipResults[b],f=c.savedLocationList(b),h=0!==f.length?c.mergeLocations(f,g):g,c.favSuggLoc=h,e.callback.call(e.instance,h,d);a.LW.PlaceSuggest.suggestLocation(b,c.lat,c.lon,this.suggestSuccess,this.suggestFailure,this.suggestTimeout,e)}},this.savedLocationList=function(a){var b,d,e,f,g=0,h=0,i=[];if("undefined"!=typeof c.cacheFavLoc&&c.cacheFavLoc.length){for(d=c.cacheFavLoc,e=d?d.length:0,g;e>g;g+=1)f=d[g],0===a.length?(i[h]=f,h+=1):(b=c.getAddressStr(f)||"",b&&0===b.toUpperCase().indexOf(a.toUpperCase())&&(f.addr=b,i[h]=f,h+=1));return i}return[]},this.getAddressStr=function(a){var b,c,d,e,f,g,h,i=null,j=this.locale.toLowerCase(),k=[];return b=a.addrstring||null,c=a.town?a.town.name:null,d=a.state?a.state.name:null,g=a.state?a.state.code:null,f=a.country?a.country.name:null,h=a.country?a.country.code:null,e=a.zip?a.zip.name:null,null!==c?(i=c,-1!==j.indexOf("hk")||-1!==j.indexOf("tw")?("undefined"!=typeof f&&f&&k.push(f),"undefined"!=typeof d&&d&&i!==d&&k.push(d),k.push(i)):(k.push(i),-1!==j.indexOf("it")||-1!==j.indexOf("au")||-1!==j.indexOf("br")||-1!==j.indexOf("mx")||-1!==j.indexOf("ca")||-1!==j.indexOf("us")?"undefined"!=typeof g&&g?k.push(g):"undefined"!=typeof d&&d&&i!==d&&k.push(d):"undefined"!=typeof d&&d&&i!==d?k.push(d):"undefined"!=typeof g&&g&&k.push(g),-1!==j.indexOf("us")&&"undefined"!=typeof h&&h?k.push(h):"undefined"!=typeof f&&f&&k.push(f)),i=k.join(", ")):null},this.suggestSuccess=function(b,e,f){var g,h,i,j=a.LW.PlaceSuggest.suggestMakeLocArray(b.r,e);return c.gossipResults[e]=j,h=c.gossipResults[e],g=c.savedLocationList(e),i=0!==g.length?c.mergeLocations(g,h):h,c.favSuggLoc=i,f.callback.call(f.instance,i,d)},this.mergeLocations=function(a,b){var c=[],d=[],e=!1,f=0,g=0,h=0,i=a?a.length:0,j=b?b.length:0;for(c=a,g;j>g;g+=1){for(f;i>f;f+=1)b[g].woe!==a[f].town.woe&&(e=!0);e&&(d[h]=b[g],h+=1,e=!1),f=0}return c.concat(d)},this.suggestFailure=function(a,b){return e.code="LW_AUTOSUGGEST_FAILURE",a?b.callback.call(b.instance,a,e):void 0},this.suggestTimeout=function(a,b){return f.code="LW_AUTOSUGGEST_TIMEOUT",b.callback.call(b.instance,a,f)},this.geocode=function(b,d){b.length>0?(c.flLoc=[],a.LW.PlaceFinder.geocodeAddress(b,this.geocoderSuccess,this.geocoderFailure,this.geocoderTimeout,d)):this.suggest(b)},this.geocoderSuccess=function(b,e){var f,g,h=[],i=0,j=0,k=a.LW.PlaceFinder.geocodeMakeLocArray(b.query.count,b);for(f=k.length,i;f>i;i+=1)g=k[i],g.city&&null!==g.city&&(h[j]=g,j+=1);return c.flLoc=h,e.callback.call(e.instance,h,d)},this.geocoderFailure=function(a,b){return e.code="LW_GEOCODER_FAILURE",b.callback.call(b.instance,a,e)},this.geocoderTimeout=function(a,b){return f.code="LW_GEOCODER_TIMEOUT",b.callback.call(b.instance,a,f)},this.addFavorite=function(b,d){a.LW.YQL.setLocation(b,c.addFavoriteSuccess,c.addFavoriteFailure,c.addFavoriteTimeout,d)},this.addFavoriteSuccess=function(a,b){return b.callback.call(b.instance,a,d,b)},this.addFavoriteFailure=function(a,b){return e.code="LW_SET_ERROR",b.callback.call(b.instance,a,e,b)},this.addFavoriteTimeout=function(a,b){return f.code="LW_SET_ERROR",b.callback.call(b.instance,a,f,b)},this.getAllFavorite=function(b){return"undefined"!=typeof c.cacheFavLoc&&c.cacheFavLoc.length?b.callback.call(b.instance,c.cacheFavLoc,d,b):void a.LW.YQL.getAllLocations(c.getFavoriteSuccess,c.getFavoriteFailure,c.getFavoriteTimeout,b)},this.getFavoriteSuccess=function(a,b){var e,f,g=[],h=0,i=0;for(e=a?a.length:0,h;e>h;h+=1)f=a[h],f.addr=c.getAddressStr(f),null!==f.addr&&(g[i]=f,i+=1);return c.invalidateCache(),c.cacheFavLoc=g,b.callback.call(b.instance,g,d,b)},this.getFavoriteFailure=function(a,b){return e.code="LW_GET_ERROR",b.callback.call(b.instance,a,e,b)},this.getFavoriteTimeout=function(a,b){return f.code="LW_GET_TIMEOUT",b.callback.call(b.instance,a,f,b)},this.removeLocation=function(b,c){a.LW.YQL.deleteLocation(b,this.removeSuccess,this.removeFailure,this.removeTimeout,c)},this.updateFavCache=function(a){var b=0,d=c.cacheFavLoc.length;for(b;d>b;b+=1)c.cacheFavLoc[b]&&c.cacheFavLoc[b].id===a&&c.cacheFavLoc.splice(b,1)},this.removeSuccess=function(a,b){return c.updateFavCache(b.locId),b.callback.call(b.instance,a,d,b)},this.removeFailure=function(a,b){return e.code="LW_REMOVE_ERROR",b.callback.call(b.instance,a,e,b)},this.removeTimeout=function(a,b){return f.code="LW_REMOVE_ERROR",b.callback.call(b.instance,a,f,b)}}a.namespace("LW"),a.LW.Core=b},"@VERSION@",{requires:["node","event","lw-geo","lw-autosuggest","lw-placefinder-YQL","lw-yql"]});var YUI;YUI.add("lw-view",function(a){"use strict";function b(){return this.yrbContainer=null,this.pendingYrbCall=!1,this.locale="en-US",this.setLocale=function(a){this.locale=a},this.yrbReqSuccessFailure=function(){},this.setYrbContainer=function(a,b){this.yrbContainer=a,b.msgContainer=this.yrbContainer},this.initYrb=function(b,c,d){if(this.yrbContainer)return void(b.msgContainer=this.yrbContainer);this.yrbConfig={proto:b.proto,host:c||("https://"===b.proto?"s.yimg.com":"l.yimg.com"),path:d||"/rl/ulw/yrb/4.0.5c/",base:"ulwv2yrb"};var e=this.yrbConfig.proto+this.yrbConfig.host+this.yrbConfig.path+this.yrbConfig.base+"_"+b.locale+".js?callback={callback}",f={instance:this,context:b,locale:b.locale,defaultLocale:b.defaultLocale,msgContainer:b.msgContainer},g=new a.JSONPRequest(e,{on:{success:this.yrbReqSuccessFailure,failure:this.yrbReqSuccessFailure},args:[f]});g.send()},this}function c(d){"undefined"==typeof c.yala&&(c.yala=new b),"undefined"==typeof this.core&&(this.core=new a.LW.Core(d)),this.guid=YUI.guid("lw"),this.id=this.guid+"_widget",this.minWidth=d.minWidth||250,this.defaultLocale="en-US",this.locale=d.locale||this.defaultLocale,this.node=d.parentNode,this.searchStartLen=2,this.state=null,this.positionXY=d.positionXY||null,this.zIndex=parseInt(d.zIndex,10)||1e3,this.cssStyle=d.cssStyle||null,this.cssClass=d.cssClass||["lw-Arrow","lw-North","lw-NorthFarEast"],this.findLocation=d.findLocation||!1,this.appID=d.app||null,this.callback=d.callback||null,this.errorCallback=d.errorCallback||null,this.lat=d.lat||null,this.lon=d.lon||null,this.rapid=null,this.isRapid=d.isRapid,this.isGlobalRapid=d.isGlobalRapid||!1,this.globalRapidIns=d.globalRapidIns||null,this.rapidConf=d.rapidConf||null,this.rapidAddConf=d.rapidAddConf||null,this.rapidRemoveConf=d.rapidRemoveConf||null,this.proto="https:"===window.location.protocol||d.forceSSL?"https://":"http://",this.viewOverlay=null,this.overlayContentBox=null,this.manageLocUrl="https://settings.yahoo.com/locations?lang={locale}",this.showFavorites="undefined"!=typeof d.showFavorites&&d.showFavorites===!1?!1:!0;var e="open",f="error",g="cleared",h="suggested",i="sqloc",j="detect",k="select",l="deleteloc",m="pin",n="new-",o="OK";return this.msgContainer={LW_AUTOSUGGEST_TIMEOUT:"Attempt to retrieve suggestions is taking too long",LW_AUTOSUGGEST_FAILURE:"Attempt to fetch suggestions is taking too long",LW_GEOCODER_FAILURE:"Unable to retrieve a match",LW_GEOCODER_TIMEOUT:"Attempt to retrieve a match is taking too long",LW_DETECT_BROWSER_SUPPORT:"Your browser does not support location detection",LW_DETECT_FAILURE:"Unable to detect your accurate location",LW_DETECT_TIMEOUT:"Attempt to detect your accurate location is taking too long",LW_SET_ERROR:"Unable to add favorite location",LW_REMOVE_ERROR:"Unable to remove favorite location",LW_GET_ERROR:"Unable to retrieve your past locations",LW_GET_TIMEOUT:"Attempt to fetch your past locations is taking too long",LW_OS_LOCATION_DETECT:"Detect my location",LW_OS_DISMISS_TXT:"Dismiss",LW_GHOST_CITY:"Enter City",LW_GHOST_CITY_ZIP:"Enter City or Zipcode",LW_TRIGGER_ICON_TOOLTIP:"Change location",LW_DETECT_LOC_TOOLTIP:"Detect your location",LW_ADD_FAV_TOOLTIP:"Add to My Locations",LW_REMOVE_FAV_TOOLTIP:"Remove from My Locations",LW_OS_MANAGE_LOCATIONS:"Manage Locations",LW_PRIVACY_POLICY:"Privacy Policy",LW_OS_MANAGE_LOCATIONS_URL:"http://location.yahoo.com/locationmgt/?locale=en-US",LW_CURRENT_LOCATION_HELP_URL:"http://help.yahoo.com/l/us/yahoo/location/",LW_PRIVACY_POLICY_URL:"http://info.yahoo.com/privacy/us/yahoo/location"},this.init=function(){this.appID&&"universal_location_widget__v3"!==this.appID&&(this.core.init(d),this.defaultLocale!==this.locale&&c.yala.initYrb(this,d.yrbHost,d.yrbPath))},this.inputGhosting=function(){var b=a.one("#"+this.inputId),c=b.get("value"),d=a.one("#placeholder-"+this.inputId);d.setStyle("width",b.getComputedStyle("width")),d.setStyle("height",b.getComputedStyle("height")),""===c&&d.show(),a.on(["focus","blur","keyup"],function(a){""!==a.currentTarget.get("value")&&"none"!==d.getStyle("display")?d.hide():""===a.currentTarget.get("value")&&"none"===d.getStyle("display")&&d.show()},b)},this.setPositionXY=function(a){this.positionXY=a},this.setZindex=function(a){this.zIndex=parseInt(a,10),null!==this.viewOverlay&&this.viewOverlay.set("zIndex",this.zIndex)},this.makeElementId=function(a){return this.id+"_"+a},this.show=function(){null!==this.viewOverlay&&this.viewOverlay.show()},this.hide=function(b){a.fire("lw-close",{target:b,widgetObj:this})},this.close=function(){null!==this.viewOverlay&&this.viewOverlay.hide()},this.hideError=function(b){a.one("#"+this.err_container_id)&&(a.one("#"+this.err_container_id).remove(!0),this.err_container_id=null,this.err_close_id=null,this.err_msg_id=null),b.halt()},this.showError=function(b){this.err_container_id&&a.one("#"+this.err_container_id)&&a.one("#"+this.err_container_id).remove(!0);var c=this.buildErrorFrag(b);c&&(this.viewOverlay.get("contentBox").one(".lw-widget-bd").prepend(c),a.on("click",a.bind(this.hideError,this),"#"+this.err_close_id))},this.initFocusManager=function(){this.overlayContentBox.plug(a.Plugin.NodeFocusManager,{descendants:"a",keys:{next:"down:40",previous:"down:38"},focusClass:{className:"lw-line-item-focus",fn:function(a){return a}},circular:!1})},this.dispatchCallback=function(b){var c=b.currentTarget,d=c.getAttribute("data-lid"),e=c.getAttribute("class"),f=c.getAttribute("data-action");if(f){switch(f){case m:e&&-1!==e.indexOf("lw-add-anchor")&&this.pin(d,c);break;case k:this.select(d,c);break;case j:this.detect(d,c);break;case l:this.deleteloc(d,c);break;default:return void b.halt()}a.UA.ie&&6===a.UA.ie&&b.halt()}},this.handleInputSubmit=function(a){var b,c=this.getInputValue();this.findLocation&&(b={callback:this.suggestCallback,instance:this},this.core.geocode(c,b)),a.halt()},this.handleInputEvents=function(b){var c,d=b.target,e=YUI().Lang.trim(d.get("value"));return 40!==b.keyCode||a.UA.touchEnabled?void(13!==b.keyCode&&16!==b.keyCode&&17!==b.keyCode&&18!==b.keyCode&&37!==b.keyCode&&38!==b.keyCode&&39!==b.keyCode&&33!==b.keyCode&&34!==b.keyCode&&(e&&e.length>=this.searchStartLen?(c={callback:this.suggestCallback,instance:this},this.core.suggest(e,c)):""===e&&(this.core.invalidateCache(),this.viewOverlay.set("bodyContent",""),c={target:null,callback:this.getAllFavoriteCallback,instance:this},this.core.getAllFavorite(c)))):(this.overlayContentBox.focusManager.refresh(),this.overlayContentBox.focusManager.set("activeDescendant",0),this.overlayContentBox.focusManager.focus(),void b.halt())},this.deleteloc=function(a,b){var c={locId:a,target:b,callback:this.deletelocCallback,instance:this};this.core.removeLocation(a,c)},this.select=function(a,b){var c=this.core.selectedLoc(a);c&&this.callback&&(this.callback(c),this.hide(b))},this.pin=function(a,b){var c,d,e=this.core.selectedLoc(a);e&&(c={type:"favorite"},e.woe&&(c.woe=e.woe),e.addr&&(c.addrstring=e.addr),d={target:b,callback:this.pinCallback,instance:this},this.core.addFavorite(c,d))},this.detect=function(a,b){var c={target:b,callback:this.detectCallback,instance:this};this.core.detect(c)},this.detectCallback=function(b,c){c.status===o?(this.callback(b[0]),this.hide(a.one("#"+this.detectGeoId)),this.state=g):(this.showError(c.code),this.errorCallback&&this.errorCallback(b))},this.suggestCallback=function(b,c){if(c.status===o){var d="",e="",f="";e=this.buildLocationBody(b),this.lwBodyId=this.makeElementId("lwBody"),f=a.substitute(this.LW_LOCS_CONTAINER_TEMPLATE,{lwBodyId:this.lwBodyId,topLocs:d+e}),this.viewOverlay.set("bodyContent",f),this.state=h}else this.errorCallback&&this.errorCallback(b)},this.deletelocCallback=function(b,c,d){if(c.status===o){var e,f,h=d.target,i=h.getAttribute("class");i&&(e=h.get("parentNode"),-1!==e.getAttribute("class").indexOf("loc-fav")?e.transition({duration:.5,easing:"ease-out",height:{value:0,duration:.5,easing:"ease-in"}},function(){var b;this.remove(!0),a.UA.ie&&6===a.UA.ie&&(b=a.one(".lw-ie-scroll-start"),b&&b.all("li").size()<=3&&(b.removeClass("lw-ie-scroll-start"),b.removeClass("sq-locations-container"),a.later(10,this,function(){b.addClass("sq-locations-container")})))}):-1!==i.indexOf("lw-remove-anchor")&&(f=h.get("parentNode").one("a").getAttribute("data-lid"),h.setAttribute("data-lid",f),h.get("parentNode").replaceClass("lw-loc-saved","lw-loc-queried"))),this.state=g}else this.showError(c.code),this.errorCallback&&this.errorCallback(b)},this.pinCallback=function(a,b,c){if(b.status===o){var d=c.target,e=d.getAttribute("class"),f=a.query.results.locdrop.Result;e&&-1!==e.indexOf("lw-add-anchor")&&(d.get("parentNode").one("a.lw-remove-anchor").setAttribute("data-lid",f),d.get("parentNode").replaceClass("lw-loc-queried","lw-loc-saved")),this.state=g}else this.showError(b.code),this.errorCallback&&this.errorCallback(a)},this.getAllFavoriteCallback=function(b,c){if(c.status===o){var d="",g="",h="";this.showFavorites&&(g=this.buildLocationBody(b)),this.lwBodyId=this.makeElementId("lwBody"),h=a.substitute(this.LW_LOCS_CONTAINER_TEMPLATE,{lwBodyId:this.lwBodyId,topLocs:d+g}),this.viewOverlay.set("bodyContent",h),this.state=e}else this.showError(c.code),this.errorCallback&&this.errorCallback(b),this.state=f},this.getInputValue=function(){if(this.inputId){var b=a.one("#"+this.inputId),c=b.get("value");return YUI().Lang.trim(c)}return""},this.geocode=function(){var a=null,b=this.getInputValue();this.controller.geocode({inputString:b,target:a})},this.handleDocumentKeyup=function(a){return 27===a.keyCode?(this.hide(a.target),void a.halt()):void 0},this.open=function(){var b,d,f,g,i,j,k,l="";this.defaultLocale===this.locale||this.yrbContainer||(d=this.locale.split("-").join("_"),window["ulwv2yrb_"+d]&&c.yala.setYrbContainer(window["ulwv2yrb_"+d],this)),this.viewOverlay?this.state&&this.state===h?(this.show(),a.UA.ie&&a.UA.ie<10&&(k=a.one("#"+this.inputId).get("value"),a.one("#"+this.inputId).focus(),a.one("#"+this.inputId).set("value",k))):(this.core.invalidateCache(),this.viewOverlay.set("bodyContent",""),b={target:null,callback:this.getAllFavoriteCallback,instance:this},this.core.getAllFavorite(b),this.show(),this.state=e,a.one("#"+this.inputId).set("value","")):(this.inputId=this.makeElementId("input"),f="#"+this.inputId,this.lwHeaderId=this.makeElementId("lwHeader"),this.lwInputFormId=this.makeElementId("lwInputForm"),g=this.populateDetectBlock(),g+=a.substitute(this.LW_OPEN_STATE_HEAD_TEMPLATE,{lwHeaderId:this.lwHeaderId,inputId:this.inputId,lwInputForm:this.lwInputFormId,ghostTxt:this.msgContainer.LW_GHOST_CITY_ZIP}),j=a.substitute(this.manageLocUrl,{locale:this.locale}),i=a.substitute(this.LW_MANAGE_LOC_TEMPLATE,{lwFooterId:this.lwFooterId,manageLocUrl:j,manageLocTxt:this.msgContainer.LW_OS_MANAGE_LOCATIONS}),this.viewOverlay=new a.LW.Overlay({parentNode:this.node,headerContent:g,bodyContent:l,footerContent:i,width:this.minWidth,zIndex:this.zIndex,cssClass:this.cssClass,cssStyle:this.cssStyle,xy:this.positionXY?[this.positionXY[0],this.positionXY[1]]:null,render:!0,visible:!0}),this.overlayContentBox=this.viewOverlay.get("contentBox").one(".lw-widget-bd"),a.UA.touchEnabled?(a.Event.defineOutside("touchstart"),this.viewOverlay.get("contentBox").on("touchstartoutside",function(a){this.hide(a.target)},this),this.overlayContentBox.delegate("tap",this.dispatchCallback,"li a",this)):(this.viewOverlay.get("contentBox").on("clickoutside",function(a){this.hide(a.target)},this),this.overlayContentBox.delegate("click",this.dispatchCallback,"li a",this),this.initFocusManager(),this.handleTooltip()),a.all(".lw-location-detect").on("click",this.dispatchCallback,this),a.on("keyup",a.bind(this.handleInputEvents,this),f),a.one("#"+this.lwInputFormId).on("submit",this.handleInputSubmit,this),b={target:null,callback:this.getAllFavoriteCallback,instance:this},this.core.getAllFavorite(b),this.isRapid&&null!==this.rapidConf&&(this.rapid=new YAHOO.i13n.Rapid(this.rapidConf),this.rapid.init()),a.UA.ie&&a.UA.ie<=10&&this.inputGhosting(),this.state=e),a.one("#"+this.inputId).focus()},this.handleTooltip=function(){var b,c,d,e=".lw-favbtn";a.UA.mobile||(b=a.Node.create('<div class="lw-tooltip"><div class="yui3-widget-bd">bd</div><div class="yui3-widget-ft"></div></div>'),d=new a.Overlay({srcNode:b,zIndex:100001e3}),d.hide(),d.render(),this.overlayContentBox.delegate("tooltip|mouseover",function(b){c=b.currentTarget.getAttribute("title"),d.set("bodyContent",c),d.set("align",{node:b.currentTarget,points:[a.WidgetPositionAlign.BC,a.WidgetPositionAlign.TC]}),d.show()},e,this),this.overlayContentBox.delegate(["tooltip|mouseout","tooltip|click"],function(){d.hide()},e,this))},this.buildErrorFrag=function(b){var c;return this.err_container_id=this.guid+"_err_container",this.err_close_id=this.guid+"_err_close",this.err_msg_id=this.guid+"_err_msg",c={errContId:this.err_container_id,errCloseId:this.err_close_id,errMsgId:this.err_msg_id,errMsg:this.msgContainer[b],dismissTxt:this.msgContainer.LW_OS_DISMISS_TXT},a.substitute(this.LW_LOC_ERR_TEMPLATE,c)},this.buildLocationFrag=function(b,c){var d,e,f,g=c.addr||"",h=c.id,i=a.UA.touchEnabled?"lw-line-item-touch":"lw-line-item";return-1===h.indexOf(n)?(d="loc-fav",e="loc-fav lw-loc-saved"):(d="loc-srch",e="lw-loc-queried"),f={sqSlk:d,sqLocCls:e,locItemCls:i,locId:h,displayTtl:g,dAction:k,displayStr:g,rmLocTooltip:this.msgContainer.LW_REMOVE_FAV_TOOLTIP,addLocTooltip:this.msgContainer.LW_ADD_FAV_TOOLTIP},a.substitute(this.LW_SQ_LOC_TEMPLATE,f)},this.populateDetectBlock=function(){this.detectGeoId=this.guid+"_detect_geo";var b={displayStr:this.msgContainer.LW_OS_LOCATION_DETECT,dtctTooltip:this.msgContainer.LW_DETECT_LOC_TOOLTIP,detectId:this.detectGeoId,dAction:j};return a.substitute(this.LW_DETECT_LOC_TEMPLATE,b)},this.buildLocationBody=function(b){var c,d="",e=0,f="";for(c=b.length||0,e;c>e;e+=1)d+=this.buildLocationFrag(i,b[e]);return a.UA.ie&&6===a.UA.ie&&c>3&&(f=" lw-ie-scroll-start"),this.lwSQLocBlockId=this.makeElementId("SQLocBlockId"),a.substitute(this.LW_SQLOCS_CON_TEMPLATE,{sqLocs:d,lwSQLocBlockId:this.lwSQLocBlockId,customClass:f})},this.destroy=function(){this.close()},this.LW_OPEN_STATE_HEAD_TEMPLATE='<div class="lw-input-blk"><form class="lw-input-frm" id="{lwInputForm}"><b class="lw-input-icn">&#xe01b;</b><div class="lw-input-wrap" id="{lwHeaderId}">',this.LW_OPEN_STATE_HEAD_TEMPLATE+=a.UA.ie&&a.UA.ie<=10?'<input type="text" autocomplete="off" placeholder="" value="" class="lw-input-box" tabindex="0" id="{inputId}"/><label for="{inputId}" id="placeholder-{inputId}" class="lw-input-placeholder" style="display:none;" unselectable="on" onselectstart="return false;" onmousedown="return false;">{ghostTxt}</label>':'<input type="text" autocomplete="off" placeholder="{ghostTxt}" value="" class="lw-input-box" tabindex="0" id="{inputId}"/>',this.LW_OPEN_STATE_HEAD_TEMPLATE+="</div></form></div>",this.LW_LOCS_CONTAINER_TEMPLATE=a.UA.ie&&6===a.UA.ie?'<div id="{lwBodyId}" class="locations-container" style="height:1%">{topLocs}</div>':'<div id="{lwBodyId}" class="locations-container">{topLocs}</div>',this.LW_SQLOCS_CON_TEMPLATE='<ul id="{lwSQLocBlockId}" class="sq-locations-container{customClass}">{sqLocs}</ul>',this.LW_DETECT_LOC_TEMPLATE='<div class="lw-detect-blk"><a class="lw-location-detect lw-detect-lnk rapid-nonanchor-lt rapidnofollow" id="{detectId}" data-lid="{detectId}" data-action="{dAction}" data-action-outcome="dtctloc" data-ylk="elm:itm;slk:dtct;itc:1;" href="javascript:;" title="{dtctTooltip}">{displayStr}</a><button class="lw-location-detect lw-detect-btn rapidnofollow" data-action="{dAction}" data-lid="{detectId}" title="{dtctTooltip}"><i class="lw-location-detect lw-detect-icn lw-Icon" data-action="{dAction}" data-lid="{detectId}">&#xe06f;</i></button></div>',this.LW_SQ_LOC_TEMPLATE='<li class="{locItemCls} {sqLocCls}" data-lid="{locId}" data-action="{dAction}"><a data-lid="{locId}" title="{displayTtl}" data-action="{dAction}" href="javascript:;" data-action-outcome="slctloc" data-ylk="elm:itm;slk:{sqSlk};itc:1;" class="rapid-nonanchor-lt rapidnofollow lw-favlnk">{displayStr}</a><a data-lid="{locId}" data-action="'+l+'" href="javascript:;" title="{rmLocTooltip}" data-action-outcome="rmloc" data-ylk="elm:btn;slk:rm;itc:1;" class="rapid-nonanchor-lt rapidnofollow lw-remove-anchor lw-favbtn"><i class="lw-remove-icon"></i></a><a data-lid="{locId}" data-action="'+m+'" href="javascript:;" title="{addLocTooltip}" data-action-outcome="slctloc" data-ylk="elm:btn;slk:loc-sug;itc:1;" class="rapid-nonanchor-lt rapidnofollow lw-add-anchor lw-favbtn"><i class="lw-add-icon"></i></a></li>',this.LW_LOC_ERR_TEMPLATE='<div id="{errContId}" class="lw-err-blk" data-lid="" data-ltype="{lType}" title="{errMsg}"><span class="rapid-nonanchor-lt rapidnofollow lw-err-msg">{errMsg}</span><a href="javascript:;" id="{errCloseId}" data-action-outcome="rmerr" data-ylk="elm:btn;slk:rm-err;itc:1;" title="{dismissTxt}" class="rapid-nonanchor-lt rapidnofollow lw-err-close-blk"><i class="lw-err-close-icn">&#xe009;</i></a></div>',this.LW_MANAGE_LOC_TEMPLATE='<div style="*height:1%" class="lw-manageloc-blk"><a id="{id}" target="_blank" data-action-outcome="nav" data-action="click" data-ylk="elm:itm;slk:mng;itc:0;" href="{manageLocUrl}" class="lw-manageloc-lnk">{manageLocTxt}</a></div>',this}a.namespace("LW"),a.LW.View=c},"@VERSION@",{requires:["node","event","event-tap","substitute","node-focusmanager","transition","lw-overlay","lw-core","overlay"]});
/* location_widget_v4.js 7b5f7ef */ YUI.add("media-location_widget_v4",function(e){var b="",a={};var c={modId:"",anchorBindId:"lw-anchor-id",widgetInputId:"",searchSelector:"",app:"yahoo.locdrop.news.desktop",autoComplete:true,customInput:false,isRapid:true,isGlobalRapid:true,globalRapidIns:YMedia.rapid,rapidAddConf:{},rapidRemoveConf:"",callback:null,errorCallback:null};function d(){d.superclass.constructor.apply(this,arguments)}d.ATTRS={ulw:null,cfg:{}};e.namespace("Media").LocationWidgetV4=d;d.NAME="LocationWidgetV4";e.extend(d,e.Base,{initializer:function(h){if(false===this.valid(h)){e.log("invalid config passed in","error",this.constructor.NAME);return}b=h;c.callback=this.locChanged;var i=h.parentNodeId,g=null,f=e.merge(c,h);if(!f.errorCallback){f.errorCallback=this.errorCallback}f.rapidAddConf[f.anchorBindId]="Location Module";f.rapidRemoveConf=f.anchorBindId;f.parentNode=e.one("#"+i);if(!f.parentNode){e.log("parentNode doesnt exist","error",this.constructor.NAME);return}g=new e.LW.View(f);g.init();this.set("ulw",g);this.set("cfg",f);this.attachEvents()},refresh:function(){var g=this.get("cfg"),i=g.parentNodeId,f=g.anchorBindId,h=null;a.widget=this.get("ulw");e.Event.detach("click",a.widget,"#"+g.parentNodeId+" #"+f);e.Event.detach("click",a.widget,document);a.widget.destroy();delete a.widget;g.parentNode=e.one("#"+i);h=new e.LW.View(g);h.init();this.set("ulw",h);this.attachEvents()},valid:function(f){if(!f){return false}if("undefined"===(typeof f.modId)||!(f.modId)){return false}if(!f.parentNodeId){return false}if(true===f.customInput&&"undefined"===(typeof f.widgetInputId)){return false}return true},setRapidConfig:function(f){var g=f.parentNodeId;if(f.isRapid===true){if(f.isGlobalRapid==false){f.rapidConf={spaceid:f.spaceId,test_id:f.bucket,tracked_mods:{locationWidgetId:"Location Module"}}}else{f.globalRapidIns=f.rapidInstance;f.rapidAddConf[f.anchorBindId]="Location Module";f.rapidRemoveConf=f.anchorBindId}}return f},locChanged:function(f){e.fire(b.modId+"-location:change",f)},errorCallback:function(f){e.log("An error has occured");e.log(f)},attachEvents:function(){var i=this.get("ulw"),j=this.get("cfg"),g=j.customInput,m=j.widgetInputId,h="#"+m,l=j.searchSelector,f;var k=this;e.on("click",function(n){i.open.call(i,n)},"#"+j.parentNodeId+" #"+j.anchorBindId);e.on("lw-close",function(s){var r=s.target,q=r.get("id"),n=r.getAttribute("class"),p=(r.get("parentNode"))?r.get("parentNode").get("id"):null,o=(r.get("parentNode"))?r.get("parentNode").getAttribute("class"):null;if((q||p)&&(q===m)){return}if((n||o)&&(n.indexOf("lw-anchor-item")!==-1||n.indexOf("lw-anchor-icon")!==-1||n.indexOf("lw-anchor-txt")!==-1||n.indexOf("lw-search-go")!==-1||o.indexOf("lw-anchor-item")!==-1||o.indexOf("lw-anchor-icon")!==-1||o.indexOf("lw-anchor-txt")!==-1)){return}i.close()},document);if(g){e.on("click",e.bind(i.open,i),h);e.on("keyup",e.bind(i.handleInputEvents,i),h);e.one(l).on("click",function(p){var n=e.one(h),o=e.Lang.trim(n.get("value"));if(i.controller&&i.controller.geocode){i.controller.geocode({inputString:o,target:n})}},i);e.on("focus",function(o){var n=o.target;if(n.get("value")===f){n.set("value","")}},h)}}})},"@VERSION@",{requires:["node","event","event-custom-base","io","json","lw-view"]});