
/* weather-search.js 6bf2657 */ var YUI;YUI.add("media-weather-search",function(c){c.namespace("Media.Weather");var b=c.Media.Weather,a="weather-search:ready";b.WeatherSearch={Weather:(function(){var d={ctx:"weather",locale:"en-US",locationLevel:"city",callback:e,crumb:"",filterCallback:null,customInput:true,widgetInputId:"weather_search_input",searchSelector:"#weather_search_go",parentNodeId:"MediaWeatherSearch",findLocation:true};function e(n){var o=n,g="",m="city",f="state",j="city",q=null;if(d.locale=="zh-Hant-HK"&&d.hkloc!=""){var l=c.JSON.parse(d.hkloc);for(var k=l.HKOLoc.length-1;k>=0;--k){var h=l.HKOLoc[k].woeid;if(o.woe==h){document.location.href=l.HKOLoc[k].url;exit}}}m=(o.ctry)?(o.ctry.name||o.ctry):((o.country)?(o.country.name||o.country):"ctry");f=(o.state)?(o.state.name||o.state):"state";j=(o.city)?(o.city.name||o.city):((o.town)?(o.town.name||o.town):"city");q=(o.woe)?(o.woe.id||o.woe):null;g="/"+m+"/"+f+"/"+j+"-"+q+"/";if(d.locale=="zh-Hant-TW"){g="/weather"+g}g=g.toLowerCase();g=g.replace(/[\']/g,"");g=g.replace(/[,\s]/g,"-");document.location.href=g}return{init:function(i){d=c.merge(d,i);var j=i.enterZip,g=c.one("#MediaWeatherSearch #weather_search_input"),h=c.one("#MediaWeatherSearch #weather_search_go"),f=null;g.removeClass("hide");h.removeClass("hide");if(c.Media.LocationWidgetV4){f=new c.Media.LocationWidgetV4(d)}c.Global.publish(a,{broadcast:true,fireOnce:true,async:false});c.on("focus",function(l){var k=c.one("#obcaerr");if(l.target.get("value")===j){l.target.set("value","")}if(k){k.remove()}},".yom-weather-search #weather_search_input");c.Global.fire(a,{})}}})()}},"0.0.1",{requires:["media-location_widget_v4"]});