
/* weather-saved-location.js ecd1b35 */ YUI().add("media-weather-saved-location",function(a){a.namespace("Media.Weather");a.Media.Weather.WeatherSavedLocation={init:function(h){spaceId=h.spaceId;helpText=h.helpText;crumb=h.crumb;var j=a.one("#MediaWeatherSavedLocation");var l=j.one("#scrollview-content");if(l){swidth=595;if(a.UA.ie==6){swidth=585}var k=new a.ScrollView({id:"scrollview",srcNode:"#scrollview-content",width:swidth,flick:{minDistance:10,minVelocity:0.3,axis:"x"}});l.removeClass("yui3-scrollview");k.render();l.removeClass("hide");var f=parseInt(j.one(" #scrollview").getStyle("width"))-42;var n=a.one(".time-loc .last");var d=0,g=0;var m=function(){var q=l.one("ul");var p=q.all("li.loc-list").getStyle("width");g=0;for(var o=0;o<p.length;o++){g+=parseInt(p[o])}};m();var c=function(o){if(d<(g-f)){d+=f;k.scrollTo(d,0,200)}};var b=function(o){if(d>(f)){d-=f}else{d=0}k.scrollTo(d,0,200)};var i=j.one("#loc-scroll-left"),e=j.one("#loc-scroll-right");a.Event.attach("click",function(o){b(o)},i);a.Event.attach("click",function(o){c(o)},e);a.Event.attach("mouseover",function(o){i.addClass("show");e.addClass("show")},j);a.Event.attach("mouseout",function(o){i.removeClass("show");e.removeClass("show")},j);a.delegate("mouseover",function(p){var o=this.one(".location .close");if(o){o.removeClass("invis")}},j,".loc-list");a.delegate("mouseout",function(p){var o=this.one(".location .close");if(o){o.addClass("invis")}},j,".loc-list");a.delegate("click",function(q){var s=this.ancestor("li.loc-list"),r=l.one("ul.saved-list"),p=s.one("li.city .locId").getContent();if(s){setTimeout(function(){s.hide("sizeOut");if(s.hasClass("first")&&(s.next()!=null)){s.next().addClass("first")}r.removeChild(s);m();if(g==0){j.one("#scrollview").set("innerHTML",'<span class="no-loc">'+helpText+"</span>")}},200)}var o="/_xhr/set-weather-loc/";cbDellocMsg=function(u,t){if(t.status=="200"){}};cfg={method:"POST",on:{complete:cbDellocMsg},data:"locId="+p+"&xhr_call=delloc&spaceid="+spaceId+"&crumb="+crumb};a.io(o,cfg)},j,".close");if(n){a.Event.attach("click",function(r){r.preventDefault();n.addClass("hide");var s=l.one("ul");var q=a.one(".current-weather-city h2").getContent();var o=a.one(".current-weather .time-loc .serialLoc.saved").getContent();s.all("li.loc-list ul li.city a").each(function(){var t=this.ancestor("ul");if(this.getContent()==q){t.addClass("default")}else{if(t.hasClass("default")){t.removeClass("default")}}});var p="/_xhr/set-weather-loc/";cbAddlocMsg=function(u,t){if(t.status=="200"){}};cfg={method:"POST",on:{complete:cbAddlocMsg},data:"location="+o+"&xhr_call=setdefault&spaceid="+spaceId+"&crumb="+crumb};a.io(p,cfg)},n)}}}}},"1.0.0",{requires:["node","event","scrollview","transition","anim","io-base","json-parse"]});